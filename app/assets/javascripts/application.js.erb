// We can't use jquery > 1.9
//= require jquery
//= require underscore
// This rails.js version is not like the original.
// We can't upgrade to the official version
//= require rails
//= require form
//= require jquery.pjax
//= require jquery.alerts
//= require rails.alerts
//= require errbit
//= require apps.show
//= require Chart
//= require_self

// Allow any gems named 'errbit_*' to require their own assets
<% Gem.loaded_specs.keys.grep(/^errbit_/).each do |plugin|
  require_asset(plugin) rescue Sprockets::FileNotFound
end %>

$(document).ready(function(){
  $('canvas.bar-chart').each(function(){
    var canvas = $(this);
    var ctx = canvas.get(0).getContext("2d");

    var data = {
      labels: canvas.data('labels'),
      datasets : [
        {
          data : canvas.data('notice-count')
        },
      ]
    }

    chart = new Chart(ctx);
    chart.Bar(data, {
      scaleShowLabels: canvas.data('show-labels'),
      scaleOverride: true,
      scaleSteps: canvas.data('scale-steps'),
      scaleStepWidth: 1,
      scaleStartValue: 0,
      animation: false,
      scaleShowGridLines: false,
      barValueSpacing: 1
    });
  });
});

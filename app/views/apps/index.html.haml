- content_for :title, t('.title')
- content_for :action_bar do
  - if current_user.admin?
    %span
      = link_to (new_app_path), class:'btn btn-success' do
        %i.fa.fa-plus-circle
        = t('.new_app')

.apps-list.container-fluid
  .row.header
    .col-xs-8.col-sm-6
      .row
        .col-xs-12.col-sm-7= t('.name')
        - if any_github_repos? || any_bitbucket_repos?
          .col-xs-12.col-sm-5
            = t('.repository')
    .col-xs-4.col-sm-6
      .row
        - if any_notification_services?
          .text-right.col-xs-12.col-sm-6= t('.notify')
        - if any_issue_trackers?
          .text-right.col-xs-12.col-sm-6= t('.tracker')
  - apps.each do |app|
    .row.content
      .col-xs-8.col-sm-6
        .row
          .name.col-xs-12.col-sm-6
            = link_to app.name, app_path(app)
            - if app.problem_count > 0
              - unresolved = app.unresolved_count
              - if unresolved > 0
                = link_to unresolved, app_path(app), class: "unresolved badge"

          - if any_github_repos? or any_bitbucket_repos?
            .github_repo.col-xs-12.col-sm-6
              - if app.github_repo?
                = link_to(app.github_repo, app.github_url, :target => '_blank')
              - if app.bitbucket_repo?
                = link_to(app.bitbucket_repo, app.bitbucket_url, :target => '_blank')
      .col-xs-4.col-sm-6
        .row
          - if any_notification_services?
            .notification_service.text-right.col-xs-12.col-sm-6
              - if app.notification_service_configured?
                - notification_service_img = image_tag("#{app.notification_service.label}_goto.png")
                - if app.notification_service.url
                  = link_to( notification_service_img, app.notification_service.url, :target => "_blank" )
                - else
                  = notification_service_img
          - if any_issue_trackers?
            .issue_tracker.text-right.col-xs-12.col-sm-6
              - if app.issue_tracker_configured?
                - tracker_img = image_tag(app.issue_tracker.type.icons[:goto])
                - if app.issue_tracker.url
                  = link_to( tracker_img, app.issue_tracker.url )
                - else
                  = tracker_img

  - if apps.none?
    .row.content
      .col-xs-12
        %em
          = t('.no_apps')
          = link_to t('.click_to_create'), new_app_path, class: 'btn btn-default'


<%# locals: (apps:) %>

<table class="apps">
  <thead>
    <tr>
      <th><%= t(".name") %></th>
      <% if any_github_repos? || any_bitbucket_repos? %>
        <th><%= t(".repository") %></th>
      <% end %>
      <% if any_notification_services? %>
        <th><%= t(".notify") %></th>
      <% end %>
      <% if any_issue_trackers? %>
        <th><%= t(".tracker") %></th>
      <% end %>
      <th><%= t(".errors") %></th>
    </tr>
  </thead>

  <tbody>
    <% apps.each do |app| %>
      <tr>
        <td class="name"><%= link_to(app.name, app_path(app)) %></td>

        <% if any_github_repos? || any_bitbucket_repos? %>
          <td class="github_repo">
            <% if app.github_repo? %>
              <%= link_to(app.github_repo, app.github_url, target: "_blank", rel: "noopener noreferrer") %>
            <% end %>
            <% if app.bitbucket_repo? %>
              <%= link_to(app.bitbucket_repo, app.bitbucket_url, target: "_blank", rel: "noopener noreferrer") %>
            <% end %>
          </td>
        <% end %>

      </tr>
    <% end %>

    <% if apps.none? %>
      <tr>
        <td colspan="3">
          <em>
            <%= t(".no_apps") %>
            <%= link_to(t(".click_to_create"), new_app_path) %>
          </em>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= content_tag :canvas, nil, id: "chart-for-#{problem.id}", width: width, height: height, data: { labels: bar_chart_x_axis_labels(show_labels).to_json, notice_count: data, show_labels: show_labels, scale_steps: bar_chart_scale_steps(data.max) } %>

<%= javascript_tag do %>
  var canvas = $("#chart-for-<%= problem.id %>")
  var ctx = canvas.get(0).getContext("2d");

  var data = {
    labels: canvas.data('labels'),
    datasets : [
      {
        data : canvas.data('notice-count')
      },
    ]
  }

  chart = new Chart(ctx);
  chart.Bar(data, {
    scaleShowLabels: canvas.data('show-labels'),
    scaleOverride: true,
    scaleSteps: canvas.data('scale-steps'),
    scaleStepWidth: 1,
    scaleStartValue: 0,
    animation: false,
    scaleShowGridLines: false,
    barValueSpacing: 1
  });
<% end %>
